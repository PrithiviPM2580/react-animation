<!-- import { useEffect, useRef, useState } from "react";
import gsap from "gsap";

const SQUARE_SIZE = 100;

export default function OverlaySquares() {
  const containerRef = useRef(null);
  const overlayRef = useRef(null);
  const squaresRef = useRef([]);
  const tlRef = useRef(null);

  const [visible, setVisible] = useState(false);

  // Create squares ONCE (or on resize)
  useEffect(() => {
    const createSquares = () => {
      const cols = Math.ceil(window.innerWidth / SQUARE_SIZE);
      const rows = Math.ceil(window.innerHeight / SQUARE_SIZE);
      const total = cols * rows;

      squaresRef.current = Array.from({ length: total });
    };

    createSquares();

    window.addEventListener("resize", createSquares);
    return () => window.removeEventListener("resize", createSquares);
  }, []);

  // Animate on toggle
  useEffect(() => {
    if (!squaresRef.current.length) return;

    // kill previous animation
    tlRef.current?.kill();

    const squares = containerRef.current.children;

    gsap.set(squares, { opacity: 0 });

    tlRef.current = gsap.timeline();

    tlRef.current
      .to(squares, {
        opacity: 1,
        duration: 0.15,
        stagger: { each: 0.004, from: "random" }
      })
      .to(squares, {
        opacity: 0,
        duration: 0.15,
        stagger: { each: 0.004, from: "random" }
      });

    gsap.to(overlayRef.current, {
      opacity: visible ? 1 : 0,
      visibility: visible ? "visible" : "hidden",
      zIndex: visible ? 0 : -1,
      duration: 0.2
    });

  }, [visible]);

  return (
    <>
      <button className="toggle" onClick={() => setVisible(v => !v)}>
        â˜°
      </button>

      <div ref={overlayRef} className="overlay">
        <div ref={containerRef} className="square-container">
          {squaresRef.current.map((_, i) => (
            <div
              key={i}
              className="square"
            />
          ))}
        </div>
      </div>
    </>
  );
}

 -->
